export function createElementFromHTML(e){let t=document.createElement("template");t.innerHTML=e;let i=t.content.children;return 1===i.length?i[0]:i}export class Notifier{constructor(e=null){this._queue=[],this._position=e,this._container=createElementFromHTML('<div class="notify__container"></div>'),"string"==typeof e&&this._container.classList.add(e),document.body.appendChild(this._container)}get lastNotify(){return 0===this._queue.length?null:this._queue[this._queue.length-1]}get firstNotify(){return 0===this._queue.length?null:this._queue[0]}setPosition(e){if(!this._position){this._container.classList.add(this._position=e);return}this._container.classList.replace(this._position,e),this._position=e}simple(e){return this.notify(this.__createNotification(e,void 0,"Notification"))}notify(e){this._queue.push(e),this._container.appendChild(e.render(this))}__createNotification(e,t,i){return("string"==typeof e&&(e={message:e}),"string"!=typeof e.classes||e.classes.includes(t)?e.classes=t:e.classes=e.classes+" "+t,e.expand)?(e.title||(e.title=i),new ExpandedNotification(e)):new Notification(e)}error(e){e.icon||(e.icon='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 21a9 9 0 1 1 0 -18a9 9 0 0 1 0 18z" /><path d="M8 16l1 -1l1.5 1l1.5 -1l1.5 1l1.5 -1l1 1" /><path d="M8.5 11.5l1.5 -1.5l-1.5 -1.5" /><path d="M15.5 11.5l-1.5 -1.5l1.5 -1.5" /></svg>'),this.notify(this.__createNotification(e,"notify__error","Error"))}warning(e){e.icon||(e.icon='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v4" /><path d="M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z" /><path d="M12 16h.01" /></svg>'),this.notify(this.__createNotification(e,"notify__warning","Warning"))}info(e){e.icon||(e.icon='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.875 6.27c.7 .398 1.13 1.143 1.125 1.948v7.284c0 .809 -.443 1.555 -1.158 1.948l-6.75 4.27a2.269 2.269 0 0 1 -2.184 0l-6.75 -4.27a2.225 2.225 0 0 1 -1.158 -1.948v-7.285c0 -.809 .443 -1.554 1.158 -1.947l6.75 -3.98a2.33 2.33 0 0 1 2.25 0l6.75 3.98h-.033z" /><path d="M12 9h.01" /><path d="M11 12h1v4h1" /></svg>'),this.notify(this.__createNotification(e,"notify__info","Info"))}success(e){e.icon||(e.icon='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-checks"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 12l5 5l10 -10" /><path d="M2 12l5 5m5 -5l5 -5" /></svg>'),this.notify(this.__createNotification(e,"notify__success","Success"))}remove(e){let t=this._queue.indexOf(e);t>-1&&(e.removeElement(this._container),this._queue.splice(t,1)[0],e.notify=null)}removeByIndex(e){let t;void 0!==(t=this._queue[e])&&this.remove(t)}removeAll(){for(;this._queue.length>0;)this.removeFirst()}removeFirst(){this.removeByIndex(0)}removeLast(){this.removeByIndex(this._queue.length-1)}}export class Notification{constructor(e){let t,i,n,s,r;this.message=e.message,this.duration=null!==(t=e.duration)&&void 0!==t?t:3e3,this.icon=e.icon,this.pauseOnHover=null===(i=e.pauseOnHover)||void 0===i||i,this.showProgress=null===(n=e.showProgress)||void 0===n||n,this.appearAnimation=null!==(s=e.appearAnimation)&&void 0!==s?"animate__"+s:null,this.disappearAnimation=null!==(r=e.disappearAnimation)&&void 0!==r?"animate__"+r:null,e.classes&&(this.classes=e.classes),e.renderActions&&(this.renderActions=t=>e.renderActions(()=>t.remove(this)))}render(e){this.notifier=e,this.element=this.doRender(e),"string"==typeof this.classes&&this.element.classList.add(...this.classes.split(" "));let t=this.renderProgressBar(e);null!==t&&this.element.appendChild(t);let i=this.duration;if(i>0){let n=!1;this.pauseOnHover&&(this.element.onmouseover=()=>n=!0,this.element.onmouseleave=()=>n=!1),this.interval=setInterval(()=>{if(0===i)e.remove(this);else{if(n)return;i-=10,null!==t&&(t.style.width=`${i/this.duration*100}%`)}},10)}return"string"==typeof this.appearAnimation&&(this.element.classList.add("animate__animated"),requestAnimationFrame(()=>this.element.classList.add(this.appearAnimation))),this.element}renderProgressBar(e){if(!this.showProgress)return null;if(this.duration>0){let t=document.createElement("div");return t.classList.add("notify__progress"),t}return null}renderMessage(e){return createElementFromHTML(`<div class="notify__message">${this.message}</div>`)}renderBody(e){let t=createElementFromHTML('<div class="notify__body"></div>'),i=this.renderIcon();null!==i&&t.appendChild(i),t.appendChild(this.renderMessage());let n=this.renderActions(e);null!==n&&t.appendChild(n);let s=this.renderCloseBtn();return s.addEventListener("click",()=>this.notifier.remove(this)),t.appendChild(s),t}renderActions(e){return null}renderIcon(e){return void 0!==this.icon?createElementFromHTML(`<div class="notify__icon__wrapper">${this.icon}</div>`):null}renderCloseBtn(e){let t=document.createElement("button");return t.setAttribute("class","btn-close"),t.innerHTML='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>',t}doRender(e){let t=createElementFromHTML('<div class="notify"></div>');return t.appendChild(this.renderBody(e)),t}removeElement(e){if(this.interval&&clearTimeout(this.interval),void 0!==this.element&&null!==this.element){let t=()=>{e.removeChild(this.element),this.element=null};"string"==typeof this.disappearAnimation?"string"==typeof this.appearAnimation?(requestAnimationFrame(()=>this.element.classList.replace(this.appearAnimation,this.disappearAnimation)),this.element.onanimationend=t):(requestAnimationFrame(()=>this.element.classList.add(this.disappearAnimation)),this.element.onanimationend=t):t()}}}class ExpandedNotification extends Notification{constructor(e){super(e),this.title=e.title||"Notification"}doRender(e){let t=createElementFromHTML('<div class="notify notify__expanded"></div>');return t.appendChild(this.renderHeader(e)),t.appendChild(this.renderBody(e)),t}renderBody(e){let t=createElementFromHTML('<div class="notify__body"></div>');t.appendChild(this.renderMessage());let i=this.renderActions(e);return null!==i&&t.appendChild(i),t}renderHeader(e){let t=createElementFromHTML('<div class="notify__header"></div>'),i=this.renderIcon();null!==i&&t.appendChild(i),t.appendChild(this.renderTitle());let n=this.renderCloseBtn();return null!==n&&(t.appendChild(n),n.addEventListener("click",()=>this.notifier.remove(this))),t}renderTitle(e){return createElementFromHTML(`<div class="notify__title">${this.title}</div>`)}}
